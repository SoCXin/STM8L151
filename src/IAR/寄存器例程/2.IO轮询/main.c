/*******************************************************************************
*******************************蓝旗嵌入式系统***********************************
*************************http://lenchimcu.taobao.com****************************
*******************************************************************************/

#include"iostm8l151k4.h"
#define LED_PORT PA_ODR_ODR6  //LED端口
/*******************************************************************************
****入口参数：无
****出口参数：无
****函数备注：GPIO配置，配置PA6输出;PB4配置为输入，带上拉电阻；
****版权信息：蓝旗嵌入式系统
*******************************************************************************/
void Init_GPIO(void)
{
       PA_DDR_DDR6 = 1;//PA6输出
       PA_CR1_C16 = 1; //推挽输出
       PA_CR2_C26 = 0; //输出速率2M
       
       PB_DDR_DDR4=0;//PB4输入
       PB_CR1_C14=1;//PB4上拉
}
/*******************************************************************************
****入口参数：无
****出口参数：无
****函数备注：主函数，一直检测PB4端口，如果是低电平，说明按键按下，反转LED
****版权信息：蓝旗嵌入式系统
*******************************************************************************/
int main( void )
{
    Init_GPIO();
    while(1)
    {
      if(PB_IDR_IDR4==0)//如果按键按下
      {
          LED_PORT^=1;
      }
    }
}
/*******************************************************************************
*******************************蓝旗嵌入式系统***********************************
*************************http://lenchimcu.taobao.com****************************
*******************************************************************************/